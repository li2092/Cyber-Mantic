# 赛博玄数 - 测试清单 ✓

**快速参考版** | 详细说明请查看 [TESTING_GUIDE.md](TESTING_GUIDE.md)

---

## 🚀 测试前准备

```
□ 安装依赖：pip install -r requirements.txt
□ 配置API密钥（至少一个）：.env文件
□ 检查数据库目录：data/user/
□ 检查日志目录：logs/
```

---

## 🔴 P0 - 关键功能（必测）

### 应用启动
```
□ 启动成功，无崩溃
□ 4个标签页都存在
□ 未配置API时显示警告
```

### 基础分析功能
```
□ 阳历输入分析正常
□ 农历输入分析正常
□ 多理论综合分析正常
□ 进度条正常更新
□ 报告内容完整
```

### AI对话功能（重点）
```
□ 9步对话流程完整执行
□ 用户消息显示在左侧
□ AI回复显示在右侧
□ 右侧边栏显示关键信息
□ 进度文字根据问题类型变化
□ 保存对话功能正常
□ 问题类型智能识别正确（事业/财运/感情等）
```

**测试用例**：
```
□ 问"今年工作运势" → 识别为"事业"
□ 问"最近财运" → 识别为"财运"
□ 问"感情状况" → 识别为"感情"
□ 问"什么时候适合" → 识别为"择时"
```

### 历史记录功能
```
□ 所有分析记录正确显示
□ 搜索功能正常
□ 类型筛选正常
□ 查看功能正常
□ 问答功能正常（AI回答相关）
□ 删除功能正常（需确认）
```

### API配置
```
□ 密钥显示/隐藏功能正常
□ 配置保存成功
□ 需要至少一个API密钥才能保存
```

### 错误处理（关键）
```
□ 网络断开时显示友好错误提示（不崩溃）
□ API密钥无效时给出配置建议（不崩溃）
□ 空输入时显示验证提示
□ 无效日期时显示验证错误
```

### 降级场景（关键）
```
□ AI对话初始化失败 → 跳过标签页，其他功能正常
□ 导出按钮初始化失败 → 降级为保存按钮
□ 功能状态面板正确显示降级功能
```

---

## 🟡 P1 - 重要功能（建议测试）

### 历史记录对比
```
□ 勾选2条记录，对比按钮启用
□ 勾选1条或3条，对比按钮禁用
□ 对比界面清晰，左右分屏
□ AI对比分析内容相关
□ 可以导出对比报告
```

### 导出功能
```
□ JSON导出：格式正确，数据完整
□ PDF导出：可打开，中文正常，格式美观
□ Markdown导出：格式正确，可渲染
```

### AI对话新对话
```
□ 点击"新对话"后状态重置
□ 可以开始新的对话
```

### 历史记录筛选
```
□ 搜索框关键词搜索正常
□ 类型下拉框筛选正常
□ 刷新按钮恢复所有记录
```

### 性能测试
```
□ 启动时间 < 5秒
□ 分析响应 < 30秒（取决于API）
□ 历史记录加载(100条) < 2秒
□ 内存占用 < 500MB，无持续增长
```

### 网络异常
```
□ 超过2分钟显示超时提醒
□ 提醒对话框内容友好
□ 操作仍可继续
```

### API异常
```
□ 配额耗尽时提示明确
□ 建议切换到其他API
□ 故障转移自动工作（如果配置多个API）
```

---

## 🟢 P2 - 次要功能（可选测试）

### 报告自定义
```
□ 填写需求描述
□ AI生成模板成功（约10秒）
□ 模板预览正确
□ 保存模板成功
□ 最多保存5个（超过自动删除最旧）
□ 使用自定义模板生成报告
□ 报告风格符合模板要求
```

### 主题切换
```
□ 清雅白主题切换正常
□ 墨夜黑主题切换正常
□ 禅意灰主题切换正常
□ 自动切换功能正常（白天/夜间）
□ 重启后主题保持
```

### 功能状态面板
```
□ 正常启动时所有8个功能显示"✅ 正常"
□ 降级时对应功能显示"❌ 不可用"
□ 刷新按钮更新状态
□ 日志记录"功能状态更新: X/8 可用"
```

**8个功能项**：
```
□ 💬 AI对话功能
□ 📊 报告导出
□ 🎨 主题切换
□ 📝 报告自定义
□ 📈 历史记录对比
□ 💡 报告问答
□ 🔍 术语解释
□ 🤖 AI分析服务
```

### 边界条件
```
□ 超长输入（2000+字）能处理或提示限制
□ 0条历史记录显示正常
□ 100+条历史记录加载正常
□ 数据库损坏时自动重建
```

---

## 📊 测试结果统计

```
总测试项：__/__
- P0关键功能：__/__ ✅
- P1重要功能：__/__ ✅
- P2次要功能：__/__ ✅

通过率：___%
```

---

## 🐛 发现的问题

### 🔴 高优先级（Blocker）
```
1. [BUG-___] _________________
   重现步骤：________________
   截图：bug-___.png

2. [BUG-___] _________________
   ...
```

### 🟡 中优先级（Major）
```
1. [BUG-___] _________________
   ...
```

### 🟢 低优先级（Minor）
```
1. [BUG-___] _________________
   ...
```

---

## ⚡ 快速测试流程（30分钟版）

**如果时间有限，按此顺序测试最关键功能**：

```
1. 启动应用 (2分钟)
   □ 检查4个标签页
   □ 检查功能状态面板

2. 基础分析 (5分钟)
   □ 完成一次阳历分析
   □ 检查报告完整性

3. AI对话 (10分钟)
   □ 完成一次完整9步对话
   □ 保存对话
   □ 检查问题类型识别

4. 历史记录 (3分钟)
   □ 查看历史记录
   □ 测试问答功能
   □ 测试对比功能（勾选2条）

5. 导出功能 (5分钟)
   □ 导出JSON
   □ 导出PDF
   □ 导出Markdown

6. 错误处理 (5分钟)
   □ 断网测试（检查错误提示）
   □ 空输入测试（检查验证提示）
   □ 无效日期测试
```

---

## 📝 测试报告提交

**完成测试后**：
```
□ 填写测试结果统计
□ 整理发现的问题清单
□ 收集测试截图（bug-*.png）
□ 导出相关日志片段
□ 提交到GitHub Issues或发送给开发团队
```

**提交内容包括**：
- ✅ 本checklist（已勾选）
- ✅ 详细测试报告（使用TESTING_GUIDE.md中的模板）
- ✅ 问题截图
- ✅ 错误日志
- ✅ 改进建议

---

## 🆘 遇到问题？

**查看日志**：
```bash
tail -100 logs/cyber_mantic.log
grep "ERROR" logs/cyber_mantic.log
```

**联系方式**：
- GitHub Issues: https://github.com/your-repo/issues
- 附上日志文件和复现步骤

---

**测试日期**：2025-__-__
**测试人员**：________
**测试环境**：Windows/macOS/Linux + Python 3.__

**总体评价**：优秀/良好/一般/较差

**测试结论**：
□ ✅ 建议发布
□ ⚠️ 修复问题后发布
□ ❌ 不建议发布

---

💡 **提示**：首次测试建议预留2-3小时完成所有测试项
