# 赛博玄数用户测试清单 (User Test Checklist)

**版本**: v4.0
**测试日期**: ___________
**测试人员**: ___________

---

## 📋 测试说明

- ✅ = 通过
- ❌ = 失败
- ⚠️ = 部分通过/有问题
- ⏭️ = 跳过

---

## 1️⃣ 基础功能测试

### 1.1 应用启动和初始化

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 1.1.1 | 启动GUI应用 `python gui.py` | 主窗口正常显示，无报错 | | | |
| 1.1.2 | 检查窗口标题和版本号 | 显示"赛博玄数"和版本信息 | | | |
| 1.1.3 | 检查所有标签页是否显示 | 显示：分析、AI对话、设置、历史记录 | | | |
| 1.1.4 | 首次启动配置检查 | 弹出API配置提示或正常加载 | | | |
| 1.1.5 | 主题加载 | 默认主题正确应用 | | | |

### 1.2 配置管理

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 1.2.1 | 进入"设置"标签页 | 显示所有配置选项 | | | |
| 1.2.2 | 配置Claude API密钥 | 能保存并验证有效性 | | | |
| 1.2.3 | 配置Gemini API密钥 | 能保存并验证有效性 | | | |
| 1.2.4 | 配置Deepseek API密钥 | 能保存并验证有效性 | | | |
| 1.2.5 | 配置Kimi API密钥 | 能保存并验证有效性 | | | |
| 1.2.6 | 选择主要API提供商 | 下拉菜单正常，保存生效 | | | |
| 1.2.7 | 保存配置 | 显示保存成功提示 | | | |
| 1.2.8 | 重启应用后检查配置 | 配置被正确保存和加载 | | | |

---

## 2️⃣ 术数理论功能测试

### 2.1 八字（命理类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.1.1 | 输入完整出生信息（年月日时） | 自动选择八字理论 | | | |
| 2.1.2 | 选择公历日期 | 正确计算四柱八字 | | | |
| 2.1.3 | 选择农历日期 | 正确转换并计算 | | | |
| 2.1.4 | 输入不同性别 | 大运排盘顺序正确 | | | |
| 2.1.5 | 输入闰年2月29日 | 正确处理特殊日期 | | | |
| 2.1.6 | 输入1900-2100年范围内日期 | 全部正确计算 | | | |
| 2.1.7 | 查看排盘结果 | 显示四柱、十神、大运 | | | |
| 2.1.8 | AI解读 | 生成专业八字分析报告 | | | |

### 2.2 紫微斗数（命理类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.2.1 | 输入完整信息（含时辰） | 自动选择紫微理论 | | | |
| 2.2.2 | 不输入时辰 | 提示必需时辰信息 | | | |
| 2.2.3 | 选择男性 | 排盘结果符合男命 | | | |
| 2.2.4 | 选择女性 | 排盘结果符合女命 | | | |
| 2.2.5 | 查看命盘 | 显示十二宫、主星、辅星 | | | |
| 2.2.6 | 查看大限流年 | 显示运势走向 | | | |
| 2.2.7 | AI解读 | 生成紫微命盘分析 | | | |

### 2.3 奇门遁甲（占卜类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.3.1 | 输入问题描述 | 自动选择奇门理论 | | | |
| 2.3.2 | 使用当前时间起局 | 排出九宫格式 | | | |
| 2.3.3 | 指定特定时间 | 按指定时间排盘 | | | |
| 2.3.4 | 查看排盘结果 | 显示九宫、八门、九星、八神 | | | |
| 2.3.5 | 查看用神判断 | 显示吉凶分析 | | | |
| 2.3.6 | 查看方位建议 | 提供具体方位指导 | | | |
| 2.3.7 | AI解读 | 生成奇门分析报告 | | | |

### 2.4 六爻（占卜类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.4.1 | 输入3个数字起卦 | 正确生成本卦、变卦 | | | |
| 2.4.2 | 输入问题类型 | 系统自动识别 | | | |
| 2.4.3 | 查看卦象 | 显示六爻、世应、动爻 | | | |
| 2.4.4 | 查看六亲关系 | 显示父母、兄弟、子孙等 | | | |
| 2.4.5 | 查看吉凶判断 | 显示卦象吉凶 | | | |
| 2.4.6 | AI解读 | 生成六爻卦象分析 | | | |

### 2.5 梅花易数（快速类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.5.1 | 输入2个数字 | 生成本卦、互卦、变卦 | | | |
| 2.5.2 | 输入颜色、方位等信息 | 系统综合分析 | | | |
| 2.5.3 | 查看卦象 | 显示三卦及卦名 | | | |
| 2.5.4 | 查看体用关系 | 显示生克关系 | | | |
| 2.5.5 | AI解读 | 生成梅花易数分析 | | | |

### 2.6 小六壬（快速类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.6.1 | 使用时间起课 | 计算大安、留连等 | | | |
| 2.6.2 | 查看六神 | 显示大安、留连、速喜、赤口、小吉、空亡 | | | |
| 2.6.3 | 查看吉凶 | 显示吉凶判断 | | | |
| 2.6.4 | AI解读 | 生成小六壬分析 | | | |

### 2.7 大六壬（占卜类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.7.1 | 输入时间信息 | 起四课三传 | | | |
| 2.7.2 | 查看四课 | 显示一至四课 | | | |
| 2.7.3 | 查看三传 | 显示初传、中传、末传 | | | |
| 2.7.4 | 查看十二将 | 显示贵人、螣蛇等 | | | |
| 2.7.5 | 查看吉凶 | 显示课体判断 | | | |
| 2.7.6 | AI解读 | 生成大六壬分析 | | | |

### 2.8 测字术（快速类）

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 2.8.1 | 输入常用汉字 | 正确识别笔画数 | | | |
| 2.8.2 | 输入生僻字 | AI辅助验证笔画数 | | | |
| 2.8.3 | 查看字形结构 | 显示左右、上下等结构 | | | |
| 2.8.4 | 查看拆字分析 | 显示字的部件 | | | |
| 2.8.5 | AI验证一致 | 代码和AI结果一致时直接使用 | | | |
| 2.8.6 | AI验证不一致 | 进行统一验证并给出最终结果 | | | |
| 2.8.7 | AI验证失败 | 降级使用代码结果 | | | |
| 2.8.8 | AI解读 | 生成测字分析 | | | |

---

## 3️⃣ AI集成功能测试

### 3.1 智能理论选择

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 3.1.1 | 输入完整命理信息 | 自动选择八字+紫微 | | | |
| 3.1.2 | 仅输入问题描述 | 选择占卜类理论 | | | |
| 3.1.3 | 输入单个汉字 | 自动选择测字术 | | | |
| 3.1.4 | 输入数字 | 选择小六壬或梅花易数 | | | |
| 3.1.5 | 查看选择理由 | 显示理论选择原因 | | | |

### 3.2 多API协同

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 3.2.1 | 综合报告解读 | 使用Claude（高质量） | | | |
| 3.2.2 | 快速问答 | 使用Deepseek（快速） | | | |
| 3.2.3 | 测字AI验证 | 使用Kimi（专项） | | | |
| 3.2.4 | API故障转移 | 主API失败时自动切换 | | | |
| 3.2.5 | 双模型验证 | 重要分析使用两个模型验证 | | | |

### 3.3 冲突解决

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 3.3.1 | 多理论结果一致 | 显示"无冲突" | | | |
| 3.3.2 | 多理论结果矛盾 | 检测到冲突并标记 | | | |
| 3.3.3 | 查看冲突详情 | 显示具体冲突点 | | | |
| 3.3.4 | 查看调和方案 | AI给出综合建议 | | | |
| 3.3.5 | 置信度评估 | 显示每个结论的置信度 | | | |

---

## 4️⃣ 用户界面测试

### 4.1 分析标签页

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 4.1.1 | 输入框布局 | 所有输入框清晰可见 | | | |
| 4.1.2 | 日期选择器 | 支持点击选择和手动输入 | | | |
| 4.1.3 | 时辰下拉菜单 | 显示子丑寅卯等12时辰 | | | |
| 4.1.4 | 性别单选框 | 男/女选择正常 | | | |
| 4.1.5 | 开始分析按钮 | 点击后显示进度 | | | |
| 4.1.6 | 进度提示 | 实时显示分析进度 | | | |
| 4.1.7 | 结果显示区域 | 报告清晰可读，支持滚动 | | | |
| 4.1.8 | 导出按钮 | 提供PDF/JSON/Markdown选项 | | | |

### 4.2 AI对话标签页

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 4.2.1 | 对话输入框 | 支持多行输入 | | | |
| 4.2.2 | 发送按钮 | 点击发送消息 | | | |
| 4.2.3 | 回车发送 | Ctrl+Enter发送消息 | | | |
| 4.2.4 | 消息显示 | 用户/AI消息区分明显 | | | |
| 4.2.5 | 历史记录 | 保留对话历史 | | | |
| 4.2.6 | 清空对话 | 一键清空历史 | | | |
| 4.2.7 | 上下文理解 | AI能理解前文 | | | |

### 4.3 设置标签页

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 4.3.1 | API配置区域 | 所有API密钥输入框显示 | | | |
| 4.3.2 | 主题选择 | 浅色/深色/自动三个选项 | | | |
| 4.3.3 | 字体大小调节 | 滑块正常工作 | | | |
| 4.3.4 | 隐私设置 | 数据保存选项可配置 | | | |
| 4.3.5 | 保存按钮 | 点击保存并提示成功 | | | |
| 4.3.6 | 重置按钮 | 恢复默认设置 | | | |

### 4.4 历史记录标签页

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 4.4.1 | 历史列表 | 显示所有历史记录 | | | |
| 4.4.2 | 时间排序 | 最新记录在最上方 | | | |
| 4.4.3 | 搜索功能 | 按关键词搜索 | | | |
| 4.4.4 | 类型筛选 | 按问题类型筛选 | | | |
| 4.4.5 | 查看详情 | 双击查看完整报告 | | | |
| 4.4.6 | 删除记录 | 单个/批量删除 | | | |
| 4.4.7 | 统计信息 | 显示总数、类型分布 | | | |

### 4.5 主题和样式

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 4.5.1 | 浅色主题 | 界面清晰，颜色协调 | | | |
| 4.5.2 | 深色主题 | 暗色背景，保护眼睛 | | | |
| 4.5.3 | 自动主题 | 根据系统时间切换 | | | |
| 4.5.4 | 主题切换 | 即时生效，无需重启 | | | |
| 4.5.5 | 字体大小 | 所有文字随设置缩放 | | | |

---

## 5️⃣ 数据管理测试

### 5.1 历史记录管理

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 5.1.1 | 自动保存分析结果 | 每次分析自动保存 | | | |
| 5.1.2 | 查看历史记录 | 能找到之前的分析 | | | |
| 5.1.3 | 按日期查询 | 快速定位特定日期 | | | |
| 5.1.4 | 按类型查询 | 筛选事业/财运等 | | | |
| 5.1.5 | 关键词搜索 | 模糊搜索问题描述 | | | |
| 5.1.6 | 删除单条记录 | 正确删除不影响其他 | | | |
| 5.1.7 | 批量删除 | 删除多条记录 | | | |
| 5.1.8 | 数据持久化 | 重启应用后数据仍在 | | | |

### 5.2 数据库完整性

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 5.2.1 | 保存100条记录 | 全部成功保存 | | | |
| 5.2.2 | 并发保存 | 不出现数据损坏 | | | |
| 5.2.3 | 特殊字符处理 | emoji、生僻字正确存储 | | | |
| 5.2.4 | 大文本处理 | 长报告正确保存 | | | |
| 5.2.5 | 数据库文件检查 | history.db文件正常 | | | |

---

## 6️⃣ 报告导出测试

### 6.1 PDF导出

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 6.1.1 | 导出单个报告 | 生成PDF文件 | | | |
| 6.1.2 | 打开PDF文件 | 格式正确，可读性好 | | | |
| 6.1.3 | 中文显示 | 中文字体正常显示 | | | |
| 6.1.4 | 图表显示 | 卦象、命盘等正确显示 | | | |
| 6.1.5 | 分页处理 | 长报告自动分页 | | | |
| 6.1.6 | 文件命名 | 包含日期和问题类型 | | | |

### 6.2 JSON导出

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 6.2.1 | 导出JSON | 生成.json文件 | | | |
| 6.2.2 | JSON格式验证 | 有效的JSON格式 | | | |
| 6.2.3 | 数据完整性 | 包含所有分析数据 | | | |
| 6.2.4 | Unicode处理 | 中文正确编码 | | | |
| 6.2.5 | 缩进格式 | 可读性良好 | | | |

### 6.3 Markdown导出

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 6.3.1 | 导出Markdown | 生成.md文件 | | | |
| 6.3.2 | 格式正确 | 标题、列表、引用正确 | | | |
| 6.3.3 | 在编辑器打开 | Typora/VS Code正常显示 | | | |
| 6.3.4 | 链接和锚点 | 内部链接正常工作 | | | |

---

## 7️⃣ 时间和地理功能测试

### 7.1 真太阳时

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 7.1.1 | 北京时间转真太阳时 | 正确计算时差 | | | |
| 7.1.2 | 东部地区（如上海） | 时间提前 | | | |
| 7.1.3 | 西部地区（如新疆） | 时间延后 | | | |
| 7.1.4 | 中部地区（如武汉） | 时差接近0 | | | |
| 7.1.5 | 经度输入 | 支持手动输入经度 | | | |

### 7.2 高德地图集成

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 7.2.1 | 输入城市名称 | 自动获取经纬度 | | | |
| 7.2.2 | 输入详细地址 | 精确定位经纬度 | | | |
| 7.2.3 | 模糊地址 | 提供多个匹配选项 | | | |
| 7.2.4 | 无效地址 | 给出错误提示 | | | |
| 7.2.5 | 无API密钥 | 降级到手动输入 | | | |

### 7.3 农历转换

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 7.3.1 | 公历转农历（普通月） | 正确转换 | | | |
| 7.3.2 | 公历转农历（闰月） | 正确标记闰月 | | | |
| 7.3.3 | 农历转公历 | 正确转换回去 | | | |
| 7.3.4 | 1900年日期 | 支持边界年份 | | | |
| 7.3.5 | 2100年日期 | 支持边界年份 | | | |
| 7.3.6 | 节气计算 | 正确计算24节气 | | | |

---

## 8️⃣ 错误处理和边界情况

### 8.1 输入验证

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 8.1.1 | 空输入提交 | 提示必填字段 | | | |
| 8.1.2 | 无效日期（如2月30日） | 拒绝并提示错误 | | | |
| 8.1.3 | 未来日期出生时间 | 提示无效 | | | |
| 8.1.4 | 过早日期（1899年前） | 提示超出支持范围 | | | |
| 8.1.5 | SQL注入测试 | 输入特殊字符不崩溃 | | | |
| 8.1.6 | 超长文本输入 | 正确处理或截断 | | | |

### 8.2 网络和API错误

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 8.2.1 | 无网络连接 | 提示网络错误 | | | |
| 8.2.2 | API密钥无效 | 提示密钥错误 | | | |
| 8.2.3 | API限流 | 自动重试或提示 | | | |
| 8.2.4 | API返回错误 | 降级或故障转移 | | | |
| 8.2.5 | 请求超时 | 显示超时提示 | | | |

### 8.3 资源和性能

| # | 测试项 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|----------|----------|------|------|
| 8.3.1 | 长时间运行 | 无内存泄漏 | | | |
| 8.3.2 | 快速连续分析 | 不卡顿崩溃 | | | |
| 8.3.3 | 大量历史记录（1000+） | 查询仍然流畅 | | | |
| 8.3.4 | 磁盘空间不足 | 提示并阻止保存 | | | |
| 8.3.5 | 多次主题切换 | 界面正常刷新 | | | |

---

## 9️⃣ 综合场景测试

### 9.1 典型用户场景

| # | 场景 | 操作步骤 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|------|----------|----------|----------|------|------|
| 9.1.1 | 新用户首次使用 | 1. 启动应用<br>2. 配置API<br>3. 进行首次分析 | 流程顺畅，有引导 | | | |
| 9.1.2 | 事业运势咨询 | 1. 输入出生信息<br>2. 问题类型"事业"<br>3. 生成报告 | 自动选择八字+紫微，给出事业建议 | | | |
| 9.1.3 | 快速占卜 | 1. 输入问题<br>2. 输入3个数字<br>3. 查看结果 | 自动选择六爻，快速得到结果 | | | |
| 9.1.4 | 查看历史对比 | 1. 进入历史<br>2. 选择两条记录<br>3. 对比分析 | 显示异同点 | | | |
| 9.1.5 | 导出并分享 | 1. 完成分析<br>2. 导出PDF<br>3. 发送给他人 | PDF专业美观 | | | |

### 9.2 问题类型覆盖

| # | 问题类型 | 测试内容 | 预期理论选择 | 实际结果 | 状态 | 备注 |
|---|----------|----------|--------------|----------|------|------|
| 9.2.1 | 事业发展 | "今年工作运势如何" | 八字+紫微 | | | |
| 9.2.2 | 财运分析 | "近期投资财运" | 八字+六爻 | | | |
| 9.2.3 | 感情婚姻 | "何时遇到正缘" | 八字+紫微 | | | |
| 9.2.4 | 健康疾病 | "身体健康状况" | 八字+奇门 | | | |
| 9.2.5 | 学业考试 | "考试能否通过" | 小六壬+梅花易数 | | | |
| 9.2.6 | 择时选日 | "搬家吉日" | 奇门遁甲 | | | |
| 9.2.7 | 决策选择 | "该不该换工作" | 六爻+梅花易数 | | | |
| 9.2.8 | 性格分析 | "我的性格特点" | 八字+紫微 | | | |

---

## 🔟 命令行模式测试（可选）

### 10.1 CLI基础功能

| # | 测试项 | 命令 | 预期结果 | 实际结果 | 状态 | 备注 |
|---|--------|------|----------|----------|------|------|
| 10.1.1 | 查看帮助 | `python main.py --help` | 显示所有命令 | | | |
| 10.1.2 | 版本信息 | `python main.py --version` | 显示版本号 | | | |
| 10.1.3 | 命令行分析 | `python main.py analyze --input data.json` | 返回分析结果 | | | |

---

## 📊 测试统计

### 总体统计

| 类别 | 总数 | 通过 | 失败 | 跳过 | 通过率 |
|------|------|------|------|------|--------|
| 基础功能 | 13 | | | | |
| 术数理论 | 53 | | | | |
| AI集成 | 16 | | | | |
| 用户界面 | 41 | | | | |
| 数据管理 | 13 | | | | |
| 报告导出 | 15 | | | | |
| 时间地理 | 18 | | | | |
| 错误处理 | 19 | | | | |
| 综合场景 | 13 | | | | |
| CLI模式 | 3 | | | | |
| **总计** | **204** | | | | |

---

## 📝 问题记录

### 严重问题（Blocker）

| # | 问题描述 | 重现步骤 | 影响范围 | 状态 | 备注 |
|---|----------|----------|----------|------|------|
| | | | | | |

### 一般问题（Major）

| # | 问题描述 | 重现步骤 | 影响范围 | 状态 | 备注 |
|---|----------|----------|----------|------|------|
| | | | | | |

### 轻微问题（Minor）

| # | 问题描述 | 重现步骤 | 影响范围 | 状态 | 备注 |
|---|----------|----------|----------|------|------|
| | | | | | |

### 建议和改进

| # | 建议内容 | 优先级 | 状态 | 备注 |
|---|----------|--------|------|------|
| | | | | |

---

## ✅ 测试结论

### 测试完成情况

- [ ] 所有功能测试完成
- [ ] 关键路径测试通过
- [ ] 已知问题已记录
- [ ] 测试报告已提交

### 发布建议

- [ ] 建议发布 - 所有关键功能正常
- [ ] 有条件发布 - 存在次要问题但不影响使用
- [ ] 不建议发布 - 存在严重问题需修复

### 测试人员签名

**测试人员**: ___________
**日期**: ___________
**签名**: ___________

---

**备注**:
1. 本清单适用于v3.1及后续版本
2. 测试环境: Python 3.8+, PyQt6
3. 建议在Windows/macOS/Linux三个平台分别测试
4. API测试需要有效的密钥
